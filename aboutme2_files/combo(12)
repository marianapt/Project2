YUI.add("flickr-products-books-setPagePhoto-updater",function(e,t){"use strict";function n(t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=r.page,l=[],c,h;f&&(f.photo&&e.Array(f.photo).forEach(function(t){var r,i,c,p,d;d=f.id+"_"+t.position,r={id:d,bookId:n.bookId,position:t.position,cropX:t.cropX/100,cropY:t.cropY/100,cropW:t.cropW/100,cropH:t.cropH/100,invalidForPrintReason:t.invalidForPrintReason,isInvalidForPrint:t.isInvalidForPrint},i=e.APIHelper.response.parsePhoto(t),c=i.owner,p=i.engagement,h=c.id,u.exists(h)?(delete c.id,u.setValues(h,c)):u.add(c),i.owner=u.proxy(h),h=p.id,a.exists(h)?(delete p.id,a.setValues(h,p)):a.add(p),i.engagement=a.proxy(h),h=i.id,o.exists(h)?(delete i.id,o.setValues(h,i)):o.add(i),r.photo=o.proxy(h),h=r.id,s.exists(h)?(delete r.id,s.setValues(h,r)):s.add(r),l.push(s.proxy(h))}),c=e.APIHelper.response.parsePage(f),c.pagePhotos=l,h=c.id,i.exists(h)?(delete c.id,i.setValues(h,c)):i.add(c))}function r(r,i){var s={};return s.page_id=r.pageId,s.book_id=r.bookId,s.position=r.position,s.photo_id=r.photoId,s.crop_x=Math.round(Math.abs(r.cropX*100)),s.crop_y=Math.round(Math.abs(r.cropY*100)),s.crop_w=Math.round(Math.abs(r.cropW*100)),s.crop_h=Math.round(Math.abs(r.cropH*100)),s.extras=e.APIHelper.request.getRebootPhotoExtras(),e.Promise.all([i.callAPI("flickr.products.books.setPagePhoto",s),i.getModelRegistry("page-models"),i.getModelRegistry("book-page-photo-models"),i.getModelRegistry("photo-models"),i.getModelRegistry("person-models"),i.getModelRegistry("photo-engagement-models")]).then(function(e){return n(e,r)},e.FetcherErrorLogger(t))}e.namespace("ModelUpdaters")["flickr-products-books-setPagePhoto"]={run:r}},"@VERSION@",{requires:["flickr-promise"],optional:["page-models","book-page-photo-models","photo-models","person-models","photo-engagement-models"]});
YUI.add("book-page-photo-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(e){},create:function(t){return e.ModelUpdaters["flickr-products-books-setPagePhoto"].run({create:!0,pageId:t.pageId,bookId:t.bookId,position:1,photoId:t.photoId,template:2,cropX:0,cropY:0,cropW:0,cropH:0},this.appContext)},update:function(t,n){return e.ModelUpdaters["flickr-products-books-updateBook"].run({bookId:this.getValue(t,"bookId")},this.appContext)}},attributes:{bookId:{getter:function(e){return parseInt(e,10)},validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},photo:{isModel:!0},cropW:{setter:function(e){return Math.abs(e)||0},getter:function(e){return parseFloat(e,10)||0},defaultFn:function(){return 0},defaultValue:0},cropH:{setter:function(e){return Math.abs(e)||0},getter:function(e){return parseFloat(e,10)||0},defaultFn:function(){return 0},defaultValue:0},cropX:{setter:function(e){return Math.abs(e)||0},getter:function(e){return parseFloat(e,10)||0},defaultFn:function(){return 0},defaultValue:0},cropY:{setter:function(e){return Math.abs(e)||0},getter:function(e){return parseFloat(e,10)||0},defaultFn:function(){return 0},defaultValue:0},position:{defaultFn:function(){return 1},getter:function(e){return parseInt(e,10)||1},defaultValue:1},isLowQuality:{defaultFn:function(){return 0}},invalidForPrintReason:{},isInvalidForPrint:{defaultFn:function(){return 0}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-products-books-fetcher","flickr-products-books-setPagePhoto-updater"]});
YUI.add("flickr-products-books-updateBook-updater",function(e,t){"use strict";function n(t,n){return e.Promise.all([n.getModel("book-models",t),n.getModelRegistry("page-models")]).then(function(e){var t,r={},i,s=e[0],o=e[1];return t={id:""+s.id,owner:n.getViewer().nsid,title:s.getValue("title")},i=s.getValue("pageOrder"),t.count_pages=i.length-1,i.forEach(function(e,t){var n,i={},s,u;s=o.proxy(e),n={id:s.id,page_number:s.getValue("pageNumber")+"",count_photos:s.getValue("countPhotos")+"",template:s.getValue("template")+"",background_color:s.getValue("backgroundColor")},u=s.getValue("pagePhotos").getList(),u=u.forEach(function(e,t){var n;e.getValue("photo")&&(n={id:e.getValue("photo").id,position:t+1+"",crop_x:e.getValue("cropX")*100+"",crop_y:e.getValue("cropY")*100+"",crop_w:e.getValue("cropW")*100+"",crop_h:e.getValue("cropH")*100+"",low_quality:e.getValue("isLowQuality"),is_invalid_for_print:e.getValue("isInvalidForPrint")},i[t+1]=n)}),n.photos=i,r[t]=n}),t.pages=r,t})}function r(n,r,i){var s=this;return this.serialize(n,r).then(function(i){return r.callAPI("flickr.products.books.updateBook",{book:JSON.stringify(i)}).then(function(t){if(t[0]&&t[0].badPhotos)e.fire("bookUpdater:failure",{badPhotos:t[0].badPhotos});else if(s.pendingUpdate)return s.pendingUpdate=!1,s.startNextUpdate(n,r)},function(e){throw s.pendingUpdate&&(s.pendingUpdate=!1),e}).then(null,e.FetcherErrorLogger(t))})}function i(){return this.updateInFlight=null,!0}function s(e,t){return this.updateInFlight=this.callAPI(e,t).then(this.clearUpdateInFlight.bind(this),this.clearUpdateInFlight.bind(this)),this.updateInFlight}function o(e,t){return this.pendingUpdate=null,this.startUpdate(e,t)}function u(e,t){var n=e.bookId;return this.pendingUpdate?this.updateInFlight:this.updateInFlight?(this.pendingUpdate=!0,this.updateInFlight):this.startUpdate(n,t)}e.namespace("ModelUpdaters")["flickr-products-books-updateBook"]={run:u,serialize:n,callAPI:r,clearUpdateInFlight:i,startUpdate:s,startNextUpdate:o}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["page-models","book-models","book-page-photo-models"]});
YUI.add("api-products-books-helper",function(e){function t(t,n,r,i){var s=t.book,o,u,a=[];s&&(u={id:s.id,owner:s.owner,title:s.title,coverPhotoId:s.coverPhotoId},s.page&&e.Array(s.page).forEach(function(t){n.exists(t.id)?o=e.APIHelper.response.parsePage(t):n.add(e.APIHelper.response.parsePage(t)),a.push(n.proxy(t.id))}),u.pages=a,r.exists(u.id)?r.setValues(u.id,{title:u.title,pages:u.pages,coverPhotoId:u.coverPhotoId}):r.add(u))}e.APIProductsBooksHelper={processDefaultResponse:t}},"@VERSION@",{requires:["flickr-promise","api-helper","api-products-books-helper"],optional:["page-models","book-models"]});
YUI.add("flickr-products-books-editBook-updater",function(e,t){"use strict";function n(n,r){var i={};return i.book_id=n.bookId,i.title=n.title,e.Promise.all([r.callAPI("flickr.products.books.editBook",i),r.getModelRegistry("book-models")]).then(null,e.FetcherErrorLogger(t))}e.namespace("ModelUpdaters")["flickr-products-books-editBook"]={run:n}},"@VERSION@",{requires:["flickr-promise","api-helper","api-products-books-helper"],optional:["page-models","book-models"]});
YUI.add("flickr-products-books-creator",function(e,t){"use strict";function n(t){var n={};return t=t||{},n=t,n.cacheBust=Date.now(),n.extras=e.APIHelper.request.getRebootPhotoExtras(),n}function r(t,n){var r,i;return r={pageModelRegistry:t.pageModelRegistry,bookModelRegistry:t.bookModelRegistry,pagePhotoModelRegistry:t.pagePhotoModelRegistry,photoModelRegistry:t.photoModelRegistry,personRegistry:t.personRegistry,photoEngagementRegistry:t.photoEngagementRegistry,photoStatsRegistry:t.photoStatsRegistry},i=e.ProductsAPIHelper.parseBook(t.response.book,r),i}function i(n,r){var i=this;return(new e.FlickrPromise({response:r.callAPI("flickr.products.books.create",this._processParams(n)),pageModelRegistry:r.getModelRegistry("page-models"),bookModelRegistry:r.getModelRegistry("book-models"),pagePhotoModelRegistry:r.getModelRegistry("book-page-photo-models"),photoModelRegistry:r.getModelRegistry("photo-models"),personRegistry:r.getModelRegistry("person-models"),photoEngagementRegistry:r.getModelRegistry("photo-engagement-models"),photoStatsRegistry:r.getModelRegistry("photo-stats-models")})).then(function(e){return i._processResponse(e,n)},e.FetcherErrorLogger(t))}e.namespace("ModelCreators")["flickr-products-books-creator"]={run:i,_processParams:n,_processResponse:r}},"@VERSION@",{requires:["flickr-promise","api-helper","products-api-helper"],optional:["page-models","book-models","book-page-photo-models","photo-models","person-models","photo-engagement-models"]});
YUI.add("book-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-products-books"].run(t,this.appContext)},update:function(t,n){return"title"in n?e.ModelUpdaters["flickr-products-books-editBook"].run({bookId:t,title:n.title.newVal},this.appContext):e.ModelUpdaters["flickr-products-books-updateBook"].run({bookId:t},this.appContext)},create:function(t){return e.ModelCreators["flickr-products-books-creator"].run(t,this.appContext)}},movePage:function(e,t,n,r){var i,s,o,u;return i=this.getValue(e,"pageOrder"),s=i.length,t<s&&n<s&&(r?u=i.splice(t,2):u=i.splice(t,1)[0],o=[n,0].concat(u),Array.prototype.splice.apply(i,o)),this.setValue(e,"pageOrder",i),i},addPage:function(e,t,n){var r,i;return r=this.getValue(e,"pageOrder"),i=r.length,n<=i&&r.splice(n+1,0,t),this.setValue(e,"pageOrder",r),r},removePage:function(e,t){var n,r,i,s;return n=this.getValue(e,"pageOrder"),s=n.length,r=n.indexOf(t),r<s&&(i=n.splice(r,1),this.setValue(e,"pageOrder",n)),n},attributes:{title:{},owner:{},pageOrder:{},coverPage:{isModel:!0},totalPhotos:{},price:{},lastPageViewed:{},created:{getter:function(e){return parseInt(e,10)}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-products-books-fetcher","flickr-products-books-updateBook-updater","flickr-products-books-editBook-updater","flickr-products-books-creator"]});
YUI.add("flickr-products-books-addPage-creator",function(e,t){"use strict";function n(t){var n={book_id:t.bookId};return t.photoIds&&(n.photo_ids=t.photoIds.join(","),n.extras=e.APIHelper.request.getRebootPhotoExtras()),e.Lang.isNumber(t.templateId)&&(n.template_id=t.templateId),t.backgroundColor&&(n.background_color=t.backgroundColor),n}function r(t,n,r){var i=t[0],s=t[1],o=t[2],u=t[3],a=t[4],f=t[5],l=t[6],c=[],h,p=i.page,d,v;return p.photo&&e.Array(p.photo).forEach(function(t){var r,i,s,f,h;h=p.id+"_"+t.position,r={id:h,bookId:n.bookId,position:t.position,cropX:t.cropX/100,cropY:t.cropY/100,cropW:t.cropW/100,cropH:t.cropH/100,invalidForPrintReason:t.invalidForPrintReason,isInvalidForPrint:t.isInvalidForPrint},i=e.APIHelper.response.parsePhoto(t),s=i.owner,f=i.engagement,d=s.id,a.exists(d)?(delete s.id,a.setValues(d,s)):a.add(s),i.owner=a.proxy(d),d=f.id,l.exists(d)?(delete f.id,l.setValues(d,f)):l.add(f),i.engagement=l.proxy(d),d=i.id,u.exists(d)?(delete i.id,u.setValues(d,i)):u.add(i),r.photo=u.proxy(d),d=r.id,o.exists(d)?(delete r.id,o.setValues(d,r)):o.add(r),c.push(o.proxy(d))}),v=e.APIHelper.response.parsePage(p),v.pagePhotos=c,v.bookId=n.bookId,d=v.id,s.exists(d)?(delete v.id,s.setValues(d,v),h=s.proxy(d)):h=s.add(v),f.proxy(n.bookId).getValue("pages").appendToList(h),h}function i(n,r){var i=this;return e.Promise.all([r.callAPI("flickr.products.books.addPage",this._processParams(n)),r.getModelRegistry("page-models"),r.getModelRegistry("book-page-photo-models"),r.getModelRegistry("photo-models"),r.getModelRegistry("person-models"),r.getModelRegistry("book-models"),r.getModelRegistry("photo-engagement-models")]).then(function(e){return i._processResponse(e,n,r)},e.FetcherErrorLogger(t))}e.namespace("ModelCreators")["flickr-products-books-addPage"]={run:i,_processParams:n,_processResponse:r}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["page-models","book-models","book-page-photo-models","photo-models","person-models","photo-engagement-models"]});
YUI.add("flickr-products-books-removePage-deletor",function(e,t){"use strict";function n(e,t){var n=e[1],r=e[0],i=n.book,s;i&&(s={id:i.id,price:i.price},r.exists(s.id)&&r.setValues(s.id,{price:s.price}))}function r(n,r,i){var s={},o=this;return s.page_id=n,s.book_id=r,e.Promise.all([i.getModelRegistry("book-models"),i.callAPI("flickr.products.books.removePage",s)]).then(function(e){return o._processResponse(e)},e.FetcherErrorLogger(t))}e.namespace("ModelDeletors")["flickr-products-books-removePage"]={run:r,_processResponse:n}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
YUI.add("page-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-products-books-getPage"].run(t,this.appContext)},update:function(t,n){return e.ModelUpdaters["flickr-products-books-updateBook"].run({bookId:this.getValue(t,"bookId")},this.appContext)},create:function(t){return e.ModelCreators["flickr-products-books-addPage"].run(t,this.appContext)},"delete":function(t){return e.ModelDeletors["flickr-products-books-removePage"].run(t,this.getValue(t,"bookId"),this.appContext)}},forceUpdate:function(t){return e.ModelUpdaters["flickr-products-books-updateBook"].run({bookId:this.getValue(t,"bookId")},this.appContext)},attributes:{bookId:{getter:function(e){return parseInt(e,10)},validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},backgroundColor:{defaultValue:"255,255,255"},pageNumber:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},template:{getter:function(e){return parseInt(e,10)},validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},countPhotos:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},pagePhotos:{isListProxy:!0}}})},"@VERSION@",{requires:["flickr-products-books-editPage-updater","flickr-products-books-getPage-fetcher","flickr-products-books-addPage-creator","flickr-products-books-removePage-deletor","flickr-model-registry","flickr-promise"]});
YUI.add("flickr-products-books-fetcher",function(e,t){"use strict";function n(t){t.page=t.page||1,t.perPage=t.perPage||100;var n;return n={book_id:t.id,extras:e.APIHelper.request.getRebootPhotoExtras()},n}function r(t,n){var r,i;return r={pageModelRegistry:t.pageModelRegistry,bookModelRegistry:t.bookModelRegistry,pagePhotoModelRegistry:t.pagePhotoModelRegistry,photoModelRegistry:t.photoModelRegistry,personRegistry:t.personRegistry,photoEngagementRegistry:t.photoEngagementRegistry,photoStatsRegistry:t.photoStatsRegistry},i=e.ProductsAPIHelper.parseBook(t.response.book,r),i}function i(n,r){var i=this;return(new e.FlickrPromise({response:r.callAPI("flickr.products.books.getBook",this._processParams(n)),pageModelRegistry:r.getModelRegistry("page-models"),bookModelRegistry:r.getModelRegistry("book-models"),pagePhotoModelRegistry:r.getModelRegistry("book-page-photo-models"),photoModelRegistry:r.getModelRegistry("photo-models"),personRegistry:r.getModelRegistry("person-models"),photoEngagementRegistry:r.getModelRegistry("photo-engagement-models"),photoStatsRegistry:r.getModelRegistry("photo-stats-models")})).then(function(e){return i._processResponse(e,n)},e.FetcherErrorLogger(t))}e.namespace("ModelFetchers")["flickr-products-books"]={run:i,_processResponse:r,_processParams:n}},"@VERSION@",{requires:["flickr-promise","api-helper","products-api-helper"],optional:["page-models","book-models","book-page-photo-models","photo-models","person-models","photo-engagement-models"]});
YUI.add("basic-book-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{title:{},owner:{},coverPhoto:{isModel:!0},coverPhotoDeleted:{defaultFn:function(){return!1}},cropW:{setter:function(e){return Math.abs(e)||0},getter:function(e){return parseFloat(e,10)||0},defaultFn:function(){return 0},defaultValue:0},cropH:{setter:function(e){return Math.abs(e)||0},getter:function(e){return parseFloat(e,10)||0},defaultFn:function(){return 0},defaultValue:0},cropX:{setter:function(e){return Math.abs(e)||0},getter:function(e){return parseFloat(e,10)||0},defaultFn:function(){return 0},defaultValue:0},cropY:{setter:function(e){return Math.abs(e)||0},getter:function(e){return parseFloat(e,10)||0},defaultFn:function(){return 0},defaultValue:0},totalPages:{},created:{getter:function(e){return parseInt(e,10)}},updated:{getter:function(e){return parseInt(e,10)}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-products-books-fetcher","flickr-products-books-updateBook-updater","flickr-products-books-editBook-updater"]});
YUI.add("flickr-creations-fetcher",function(e,t){"use strict";function n(t){var n={extras:e.APIHelper.request.getRebootPhotoExtras()};return n}function r(t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=t[6],l=t[7],c=t[8],h=[],p=[],d=[];return r&&r.stat==="ok"&&(h=Object.keys(r.wallart_ids).map(function(e){return r.wallart_ids[e]}),e.Array.each(h,function(t,n){if(t.photoSource===2)return;var r,i,s,u=[],h=!1,d,v,m,g={};r=a.addOrUpdate({id:t.owner}),t.photo.id?(g={photos:[t.photo],personModelRegistry:a,photoModelRegistry:f,photoEngagementModelRegistry:l,photoStatsModelRegistry:c},t.photo.ownerId&&(g.ownerID=t.photo.ownerId),i=e.APIHelper.response.parsePhotos(g)[0]):h=!0,t.orders&&typeof t.orders=="object"&&(s=Object.keys(t.orders).map(function(e){return t.orders[e]}),e.Array.each(s,function(e){u.push({orderId:e.orderId,orderStatus:e.order.statusOrder,dateCreate:e.dateCreate,dateUpdate:e.dateUpdate})})),t.skuId.substr(-2)==="CC"?(d=t.skuId.slice(0,-3),v=!0):t.skuId.substr(-2)==="MK"?(d=t.skuId.slice(0,-3),m=!0):d=t.skuId,p.push(o.addOrUpdate({id:t.wallartId,owner:r,photo:i,photoDeleted:h,skuId:d,isCC:v,isMK:m,orientation:t.orientation,price:t.price,cropW:t.photo.cropW,cropH:t.photo.cropH,cropX:t.photo.cropX,cropY:t.photo.cropY,isEditable:t.isEditable,isLowQuality:t.isLowQuality,created:t.dateCreate,updated:t.dateUpdate,orders:u,photoSource:t.photoSource}))})),i&&i.stat==="ok"&&e.Array.each(i.books.book,function(t,n){var r=!1,i,s;i=a.addOrUpdate({id:t.owner}),t.coverPhoto.id?s=e.APIHelper.response.parsePhotos({photos:[t.coverPhoto],personModelRegistry:a,photoModelRegistry:f,photoEngagementModelRegistry:l,photoStatsModelRegistry:c})[0]:r=!0,d.push(u.addOrUpdate({id:t.id,title:t.title,owner:i,coverPhoto:s,coverPhotoDeleted:r,totalPages:t.countPages,created:t.dateCreate,updated:t.dateUpdate,cropW:t.coverPhoto.cropW/100,cropH:t.coverPhoto.cropH/100,cropX:t.coverPhoto.cropX/100,cropY:t.coverPhoto.cropY/100}))}),s.addOrUpdate({id:n.id,wallarts:p,books:d}),{wallarts:p,books:d}}function i(n,r){var i=this,s=this._processParams(n);return e.Promise.all([r.callAPI("flickr.products.wallart.getList",s,!0),r.callAPI("flickr.products.books.getList",s,!0),r.getModelRegistry("creations-models"),r.getModelRegistry("wallart-models"),r.getModelRegistry("basic-book-models"),r.getModelRegistry("person-models"),r.getModelRegistry("photo-models"),r.getModelRegistry("photo-engagement-models"),r.getModelRegistry("photo-stats-models")]).then(function(e){return i._processResponse(e,n)},e.FetcherErrorLogger(t))}e.namespace("ListFetchers")["flickr-creations"]={run:i,_processParams:n,_processResponse:r}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["creations-models","wallart-models","basic-book-models","person-models","photo-models","photo-engagement-models","photo-stats-models"]});
YUI.add("creations-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ListFetchers["flickr-creations"].run(t,this.appContext)}},removeCreations:function(t,n){var r=this;n.wallarts&&e.Array.each(n.wallarts,function(e,n){r.getValue(t,"wallarts").remove(e)}),n.books&&e.Array.each(n.books,function(e,n){r.getValue(t,"books").remove(e)})},appendCreations:function(t,n){var r=this;n.wallarts&&e.Array.each(n.wallarts,function(e,n){r.getValue(t,"wallarts").unshift(e)})},attributes:{wallarts:{isCollection:!0},books:{isCollection:!0}}})},"@VERSION@",{requires:["flickr-promise","model-proxy","flickr-model-registry","flickr-creations-fetcher"],optional:["wallart-models","basic-book-models"]});
YUI.add("flickr-products-wallart-create-creator",function(e,t){"use strict";function r(e){var t={};return e=e||{},t.photo_id=e.photoId,t.sku_id=e.skuId,t}function i(e,t,r){var i=e[0],s=e[1],o=e[2],u=e[3],a=t.nsid,f,l,c,h,p=!1,d=!1,v=e[4],m,g;return i?(f=i.wallart,c=o.exists(a)?o.proxy(a):o.add({id:a}),l=u.exists(t.photoId)?u.proxy(t.photoId):u.add({id:t.photoId}),f.skuId.substr(-2)==="CC"?(h=f.skuId.slice(0,-3),p=!0):f.skuId.substr(-2)==="MK"?(h=f.skuId.slice(0,-3),d=!0):h=f.skuId,s.exists(f.wallartId)?(s.setValues(f.wallartId,{owner:c,photo:l,skuId:h,isCC:p,isMK:d,orientation:f.orientation,photoSource:f.photoSource}),g=s.proxy(f.wallartId)):g=s.add({id:f.wallartId,owner:c,photo:l,skuId:h,isCC:p,isMK:d,orientation:f.orientation,created:f.dateCreate,photoSource:f.photoSource}),v.exists(a)&&(m=v.proxy(a),m.appendCreations({wallarts:[s.proxy(f.wallartId)]}))):(n.warn("No API response?"),g=this),g}function s(n,r){var i=this;return e.Promise.all([r.callAPI("flickr.products.wallart.create",this._processParams(n)),r.getModelRegistry("wallart-models"),r.getModelRegistry("person-models"),r.getModelRegistry("photo-models"),r.getModelRegistry("creations-models")]).then(function(e){return i._processResponse(e,n,r)},e.FetcherErrorLogger(t))}var n=require("hermes-core/flog")(t);e.namespace("ModelCreators")["flickr-products-wallart-create"]={run:s,_processParams:r,_processResponse:i}},"@VERSION@",{requires:["flickr-promise","wallart-models"],optional:["person-models","photo-models","creations-models"]});
YUI.add("flickr-products-wallart-editWallart-updater",function(e,t){"use strict";function n(e,t,n){var r=e.response,i=e.wallartModelRegistry;i.exists(t)&&i.setValue(t,"price",r.wallart.price);if(this.pendingUpdate)return this.pendingUpdate=!1,this.startNextUpdate(t,n)}function r(e,t){return t.getModel("wallart-models",e).then(function(e){var t,n,r,i,s;return n=e.getValue("photo"),i=e.getValue("isCC"),s=e.getValue("isMK"),r=e.getValue("skuId"),i===!0?r+="_CC":s===!0&&(r+="_MK"),t={wallart_id:e.id,photo:{id:n.getValue("id"),owner:n.getValue("owner").getValue("id"),crop_x:e.getValue("cropX"),crop_y:e.getValue("cropY"),crop_h:e.getValue("cropH"),crop_w:e.getValue("cropW")},sku_id:r,orientation:e.getValue("orientation"),is_low_quality:e.getValue("isLowQuality")},{wallart:JSON.stringify(t)}})}function i(n,r){var i=this;return this.serialize(n,r).then(function(s){return(new e.FlickrPromise({response:r.callAPI("flickr.products.wallart.update",s),wallartModelRegistry:r.getModelRegistry("wallart-models")})).then(function(e){return i.processResponse(e,n,r)},function(e){throw i.pendingUpdate&&(i.pendingUpdate=!1),e}).then(null,e.FetcherErrorLogger(t))})}function s(){return this.updateInFlight=null,!0}function o(e,t){return this.updateInFlight=this.callAPI(e,t).then(this.clearUpdateInFlight.bind(this),this.clearUpdateInFlight.bind(this)),this.updateInFlight}function u(e,t){return this.pendingUpdate=null,this.startUpdate(e,t)}function a(e,t){return this.pendingUpdate?this.updateInFlight:this.updateInFlight?(this.pendingUpdate=!0,this.updateInFlight):this.startUpdate(e,t)}e.namespace("ModelUpdaters")["flickr-products-wallart-editWallart"]={run:a,serialize:r,callAPI:i,clearUpdateInFlight:s,startUpdate:o,processResponse:n,startNextUpdate:u}},"@VERSION@",{requires:["flickr-promise"],optional:[]});
YUI.add("wallart-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-products-wallart"].run(t,this.appContext)},create:function(t){return e.ModelCreators["flickr-products-wallart-create"].run(t,this.appContext)},update:function(t,n){return e.ModelUpdaters["flickr-products-wallart-editWallart"].run(t,this.appContext)}},attributes:{owner:{isModel:!0},photo:{isModel:!0},photoDeleted:{defaultFn:function(){return!1}},isCC:{defaultFn:function(){return!1}},isMK:{defaultFn:function(){return!1}},photoSource:{},skuId:{},orientation:{},price:{},cropW:{setter:function(e){return Math.abs(parseFloat(e,10))},defaultFn:function(){return 0}},cropH:{setter:function(e){return Math.abs(parseFloat(e,10))},defaultFn:function(){return 0}},cropX:{setter:function(e){return Math.abs(parseFloat(e,10))},defaultFn:function(){return 0}},cropY:{setter:function(e){return Math.abs(parseFloat(e,10))},defaultFn:function(){return 0}},isLowQuality:{defaultFn:function(){return 0}},isEditable:{defaultFn:function(){return!0}},isDeleted:{defaultFn:function(){return!1}},invalidForPrintReason:{},isInvalidForPrint:{},created:{getter:function(e){return parseInt(e,10)}},updated:{getter:function(e){return parseInt(e,10)}},orders:{}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-products-wallart-fetcher","flickr-products-wallart-create-creator","flickr-products-wallart-editWallart-updater"]});
YUI.add("flickr-products-wallart-fetcher",function(e,t){"use strict";function n(t){var n={wallart_id:t.id,return_deleted:1,extras:e.APIHelper.request.getRebootPhotoExtras()};return n}function r(t,n){var r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],a=t[5],f=r.wallart,l,c,h,p,d=!1,v=!1,m={};if(f)return h=s.addOrUpdate({id:f.owner}),m={photos:[f.photo],personModelRegistry:s,photoModelRegistry:o,photoEngagementModelRegistry:u,photoStatsModelRegistry:a},f.photo.ownerId&&(m.ownerID=f.photo.ownerId),c=e.APIHelper.response.parsePhotos(m)[0],f.skuId.substr(-2)==="CC"?(p=f.skuId.slice(0,-3),d=!0):f.skuId.substr(-2)==="MK"?(p=f.skuId.slice(0,-3),v=!0):p=f.skuId,l={id:f.wallartId,owner:h,photo:c,skuId:p,isCC:d,isMK:v,orientation:f.orientation,price:f.price,cropW:f.photo.cropW,cropH:f.photo.cropH,cropX:f.photo.cropX,cropY:f.photo.cropY,isEditable:f.isEditable,isDeleted:f.isDeleted,isLowQuality:f.isLowQuality,photoSource:f.photoSource,created:f.dateCreate},i.addOrUpdate(l),l}function i(n,r){var i=this;return e.Promise.all([r.callAPI("flickr.products.wallart.getDetails",this._processParams(n)),r.getModelRegistry("wallart-models"),r.getModelRegistry("person-models"),r.getModelRegistry("photo-models"),r.getModelRegistry("photo-engagement-models"),r.getModelRegistry("photo-stats-models")]).then(function(e){return i._processResponse(e,n)},e.FetcherErrorLogger(t))}e.namespace("ModelFetchers")["flickr-products-wallart"]={run:i,_processResponse:r,_processParams:n}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["wallart-models","photo-models","person-models","photo-engagement-models","photo-stats-models"]});
YUI.add("photo-engagement-view",function(e,t){var n=require("hermes-core/flog")(t);e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.photoId=e.photoId,this.nsid=e.nsid,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this.signinPendingQueue=e.signinPendingQueue,this},subviewConfig:{"fave-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,hideWhoFaved:!0},"photo-well-scrappy-edit-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"fluid-share-photo-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"photo-sidebar-toggle-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,inlineStyling:!0,disabled:function(){return!this.appContext.flipper.isFlipped("enable-similarity-search-from-photo-page")}}},loadState:function(){var e=this;return this.appContext.getModel("photo-models",e.photoId).then(function(t){e.set("photo",t)})},buildContainer:function(){var e=this.get("photo"),t=e.getValue("owner"),n=this.get("container"),r;return r={"share-view":this.subviews["fluid-share-photo-view"]?this.subviews["fluid-share-photo-view"].get("container"):"",photoId:e.getValue("id"),ownerId:e.getValue("owner").getValue("id"),isVideo:e.getValue("isVideo"),viewerIsOwner:t.getValue("isMe"),canCreateWallart:this.canCreateWallart(),isWallartLowQuality:this.isWallartLowQuality(),downloadingAvailable:!1,downloadLink:"",hasFullScreenButton:this.appContext.flipper.isFlipped("enable-similarity-search-from-photo-page")},e.getValue("isVideo")?(r.downloadLink="/video_download.gne?id="+e.getValue("id"),this.appContext.flipper.isFlipped("enable-album-download")&&(r.downloadingAvailable=e.getValue("engagement").getValue("canDownload")),t.getValue("isMe")&&(r.downloadingAvailable=!0)):(r.downloadLink=e.getValue("url")+"/sizes/l/",r.downloadingAvailable=!0),this.appContext.forceServerRender&&(r.downloadItems=this.getDownloadMenuItems()),this.setContainerWithTemplate("photo-engagement",r),r.canCreateWallart&&n.addClass("has-wallart"),r.hasFullScreenButton&&n.addClass("has-fullscreen"),this},activate:function(){var e=this.get("photo").getValue("license"),t=e!==0&&e!==7&&e!==8&&e!==10,n=e===8,r=e===9,i=e===10,s=this.get("container");if(this.signinPendingQueue&&this.signinPendingQueue.length>0){var o=this.signinPendingQueue;for(var u=0;u<o.length;u++)o[u].key==="download"&&o[u].value&&o[u].value.id===this.photoId&&this.downloadItem(o[u].value.imageUrl)}return this.appContext.flipper.isFlipped("enable-signed-out-download-cta-test")&&!this.appContext.getViewer().signedIn&&!this.appContext.getUA().isBot&&this.get("photo").getValue("owner").getValue("isPro")!==!0&&!t&&!n&&!r&&!i&&this.get("photo").getValue("visibilitySource")!==2&&(this.signedOutTest=!0),s.all(".sizes li a.download-image-size")&&this.registerEventHandler(s.all(".sizes li a.download-image-size").on("click",this.handleDownloadItemClick,this)),this.attachKeyEvent("down:68",this.handleDownloadMenuButtonClick.bind(this)),this.registerEventHandler(s.delegate("click",this.handleDownloadMenuButtonClick.bind(this),".download a")),this.registerEventHandler(s.delegate("click",this.createWallartClick.bind(this),".wallart a")),this.signedOutTest&&s.one(".all-sizes")&&this.registerEventHandler(s.one(".all-sizes").on("click",function(e){e.halt(),this.signUpAndDownloadItem()}.bind(this))),this},canCreateWallart:function(){var e=!1,t,n=this.appContext.getViewer(),r,i;return t=this.get("photo"),t&&n&&(r=t.getValue("owner").getValue("isMe"),i=!t.getValue("isVideo"),n.signedIn&&r&&i&&(e=!0)),e},isWallartLowQuality:function(){var t=this.get("photo");return this.wallartHelper||(this.wallartHelper=new e.WallartHelper),this.wallartHelper.isPhotoWallartable(t).skus.length===0?!0:!1},createWallartClick:function(n){var r=this,i="/create/wallart/",s=this.get("photo"),o;n.halt(),e.rapidTracker.beacon(t,"createWallartClick");if(this.appContext.flipper.isFlipped("enable-blurb-photobooks-links")){this.appContext.flapp.navigate("/create");return}if(s.getValue("hasInvalidColorspaceForPrint"))return this.handleLacksWallartability("COLORSPACE");this.wallartHelper||(this.wallartHelper=new e.WallartHelper(this.appContext));if(this.wallartHelper.isPhotoWallartable(s).skus.length===0)return this.handleLacksWallartability("LOW_QUALITY");this.appContext.getModelRegistry("wallart-models").then(function(t){t.remoteCreate({nsid:r.appContext.getViewer().nsid,photoId:s.getValue("id")}).then(function(t){i+=t.getValue("id")+"/edit",YUI.Env.isServer||(!r.appContext.secure&&window.location.host===e.config.flickr.url.host?e.config.win.location.href=i:r.appContext.flapp.navigate(i))},function(t){o=new e.Views.FluidModal({appContext:r.appContext,darkOverlay:!0,dismissOnOverlayClick:!0,actionButtonLabel:r.intlMessage({intlName:"common.OK"}),title:r.intlMessage({intlName:"common.UPLOAD_ERROR_TITLE"}),message:"There was a problem creating your wall art. Please try again later."}),o.show()})})},handleLacksWallartability:function(t){var n,r;t==="LOW_QUALITY"?r="Looks like this photo doesn't meet the minimum requirements to get printed. Please choose a photo that's at least 975 &times; 825 pixels. Learn more about <a href='http://help.yahoo.com/kb/index?page=content&y=PROD_FLICKR&locale=en_US&id=SLN22567'>requirements</a> for print products.":t==="COLORSPACE"&&(r="Sorry, we cannot print photos with a CMYK or ProPhoto RGB colorspace. We recommend photos with an sRGB color space. <a href='https://help.yahoo.com/kb/flickr/creations-faq-sln22216.html?impressions=true#cont33'>Learn more</a>."),n=new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,showCancelButton:!1,showCancelX:!0,title:"Try a different photo",message:r,classList:"lacks-wallartability"}),n.show()},getDownloadMenuItems:function(t){var n=e.clone(this.get("photo").toJSON()),r,i=[],s,o=this.get("photo").getValue("engagement").getValue("canDownload"),u=!1;if(!n||!n.sizes)return"";n.sizes.q&&(n.sizes.q.label=
this.intlMessage({intlName:"photo-page-scrappy.SQUARE"}),i.push(n.sizes.q)),n.sizes.s&&(n.sizes.s.label=this.intlMessage({intlName:"photo-page-scrappy.SMALL"}),i.push(n.sizes.s)),n.sizes.z&&(n.sizes.z.label=this.intlMessage({intlName:"photo-page-scrappy.MEDIUM"}),i.push(n.sizes.z)),n.sizes.k?(n.sizes.k.label=this.intlMessage({intlName:"photo-page-scrappy.LARGE"}),i.push(n.sizes.k)):n.sizes.h?(n.sizes.h.label=this.intlMessage({intlName:"photo-page-scrappy.LARGE"}),i.push(n.sizes.h)):n.sizes.l&&(n.sizes.l.label=this.intlMessage({intlName:"photo-page-scrappy.LARGE"}),i.push(n.sizes.l)),n.sizes.o&&(n.sizes.o.label=this.intlMessage({intlName:"photo-page-scrappy.ORIGINAL"}),i.push(n.sizes.o));for(s=0;s<i.length;s++)i[s].url=i[s].displayUrl.replace(/^(.+)(\..+)$/,"$1_d$2");return o&&(u=!0),r=this.templates("scrappy-download-menu")({photo:n,sizes:i,showDownloadSizes:u}),r},createDownloadDialog:function(t){var n=this.get("container"),r=this;this.downloadMenu&&(this.downloadMenu.close(),this.downloadMenu=null),this.downloadMenu=new e.Views.FluidDroparound({appContext:this.appContext,dismissOnOverlayClick:!0,preferTop:!0,showDropArrow:!0,anchorOffsetVertical:5,anchorOffsetHorizontal:1,anchorElement:n.one(".download"),htmlMessage:t,closeOnScroll:!1,classList:"download-dialog-tooltip",hideModalOverlay:!0,autoSizeToContent:!0}),this.downloadMenu.on("activated",function(e){r.fire("subviewViewEvent","make in view",n)}),this.downloadMenu.on("closeDroparound",function(e){r.fire("subviewViewEvent","close in view")}),this.downloadMenu.show()},handleDownloadMenuButtonClick:function(n){var r=this.get("photo"),i;if(n.target.ancestor(".download",!0).hasClass("disabled"))n.preventDefault();else if(r.getValue("isVideo"))if(!this.appContext.flipper.isFlipped("enable-album-download")){i=r.getValue("owner").getValue("isMe");if(!i)return n.preventDefault(),!1}else this.handleDownloadItemClick(n);else n.halt(),this.createDownloadDialog(this.getDownloadMenuItems());e.rapidTracker.beacon(t,"downloadDialogClick")},handleDownloadItemClick:function(n){n.preventDefault();var r;r=n.currentTarget.getAttribute("href"),this.signedOutTest?this.signUpAndDownloadItem(r):this.downloadItem(r),e.rapidTracker.beacon(t,"photoDownloadClick"),this.downloadMenu.close()},downloadItem:function(e){document.location=e},signUpAndDownloadItem:function(t){var n=this,r=this.intlMessage({intlName:"photo-page-scrappy.SIGNUP_AND_DOWNLOAD_TITLE"}),i=this.intlMessage({intlName:"photo-page-scrappy.SIGNUP_AND_DOWNLOAD_MESSAGE"}),s,o;this.get("photo").getValue("isVideo")&&this.appContext.lang.toLowerCase()==="en-us"&&(r=this.intlMessage({intlName:"photo-page-scrappy.SIGNUP_AND_DOWNLOAD_VIDEO_TITLE"})),s=e.url(e.URLHelper.getPhotoPage({photoId:this.photoId,pathAlias:this.nsid})),o=new e.Views.SignUpModal({appContext:this.appContext,signUpHeaderClass:"signup-download",signUpTitle:r,signUpMessage:i,beaconPrefix:"download"}),o.on("signUpClick",function(r){t?e.SigninHelper.signUpPendingDownload({id:n.photoId,imageUrl:t},{postLoginUrl:s}):e.SigninHelper._redirectToSignUp("download",{postLoginUrl:s+"sizes/l/"})}),o.on("signInClick",function(r){t?e.SigninHelper.addPendingDownload({id:n.photoId,imageUrl:t},{postLoginUrl:s}):e.SigninHelper._redirectToSignin("download",{postLoginUrl:s+"sizes/l/"})}),o.show()}})},"@VERSION@",{requires:["flickr-view","hermes-template-photo-engagement","hermes-template-scrappy-download-menu","wallart-helper","signup-modal-view","fluid-share-photo-view","fluid-droparound-view","better-throttle"],optional:["photo-models","wallart-models"],langBundles:["common","photo-page-scrappy"]});
YUI.add("seo",function(e,t){e.Seo={appContext:{},stripTags:function(e){return e?String(e).replace(/<\/?[^>]+>/g,""):""},collapseWhitespace:function(e){return e.trim().replace(/\s+/g," ")},decodeEntities:function(e){return e.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&nbsp;/g," ")},cleanText:function(e){return this.collapseWhitespace(this.decodeEntities(this.stripTags(e)))},getSEOTitleForPhoto:function(e){var t=this.cleanText(e.getValue("title")),n=this.cleanText(e.getValue("description")),r=this.cleanText(e.getValue("owner").getValue("displayname")),i="",s="| Flickr",o=70,u=o-(t.length+s.length+5);return t.length>=50?i=t.slice(0,58)+(t.length<58?" ":"\u2026 "):t.length>20&&t.length<50?n.length>20?i=t+" | "+n.slice(0,u)+(n.length<u?" ":"\u2026 "):n.length>0?i=t+" | "+n.slice(0,u)+(n.length<u?" ":"\u2026 ")+"| "+r+" ":i=t+" | "+r+" ":t.length<=20&&t.length>0?n.length>50?i=t+" | "+n.slice(0,u)+(n.length<u?" ":"\u2026 "):n.length>0?i=t+" | "+n.slice(0,u)+(n.length<u?" ":"\u2026 ")+"| "+r+" ":i=t+" | "+r+" ":n.length>50?i=n.slice(0,u)+(n.length<u?" ":"\u2026 "):n.length>0?i=n.slice(0,u)+(n.length<u?" ":"\u2026 ")+"| "+r+" ":i="Untitled | "+r+" ",i},generateSEODescriptionForPhoto:function(e,t,n,r,i){var s=e.getValue("og:title"),o=e.getValue("og:description"),u="",a=160;return s==="Untitled"&&(s=r),o.length>120?u=o.slice(0,120)+(o.length<120?" ":"\u2026 ")+n+" "+i+".":o.length>60&&o.length<120?u=o+(o.slice(o.length-1,o.length)==="."?" ":". ")+s.slice(0,40)+(s.length<40?" ":"\u2026 ")+n+" "+i+".":o.length<=60&&(u=s+(s.slice(s.length-1,s.length)==="."?" ":". ")+o.slice(0,a-s.length)+(o.length<a-s.length?" ":"\u2026 ")+n+" "+i+"."),u}}},"@VERSION@",{requires:[]});
YUI.add("hermes-template-empty-photo-page",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return u((n.outlet||t&&t.outlet||o).call(s,t!=null?t["global-nav-view"]:t,{name:"outlet",hash:{},data:i}))+'\n\n<div class="fluid-centered" style="text-align: center;">\n	<h3>'+u((n.intlHTMLMessage||t&&t.intlHTMLMessage||o).call(s,{name:"intlHTMLMessage",hash:{intlName:"photo-page-scrappy.TIMEOUT_FAILURE"},data:i}))+"</h3>\n</div>\n\n"+u((n.outlet||t&&t.outlet||o).call(s,t!=null?t["footer-full-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/empty-photo-page",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-global-nav",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return"gn-signed-in"},3:function(e,t,n,r,i){return"gn-signed-out"},5:function(e,t,n,r,i){return" top-banner"},7:function(e,t,n,r,i){return"		"+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["partner-account-banner-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"},9:function(e,t,n,r,i){var s;return(s=n.unless.call(t!=null?t:{},(s=t!=null?t.elements:t)!=null?s.right_side_signup:s,{name:"unless",hash:{},fn:e.program(10,i,0),inverse:e.noop,data:i}))!=null?s:""},10:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'					<li role="menuitem"\n						class="gn-signup"\n						aria-label="'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"common.SIGN_UP"},data:i}))+'">\n						<a data-track="gnSignupClick"\n							class="gn-title butt"\n							href="/signup">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"common.SIGN_UP"},data:i}))+"</a>\n					</li>\n"},12:function(e,t,n,r,i){var s,o=e.lambda,u=e.escapeExpression,a=t!=null?t:{},f=n.helperMissing;return'					<li data-context="you">\n						<a role="menuitem"\n							data-track="gnYouMainClick"\n							class="gn-title you"\n							href="'+u(o((s=t!=null?t.viewer:t)!=null?s.url:s,t))+'"\n							aria-haspopup="true"\n							aria-expanded="false"\n							aria-label="'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.YOU"},data:i}))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.YOU"},data:i}))+'</a>\n\n						<ul class="gn-submenu" role="menu" aria-label="submenu">\n							<li class="menuitem">\n								<a role="menuitem"\n								aria-label="'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.ABOUT"},data:i}))+'"\n								data-track="gnYouAboutClick" href="'+u(o((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.profile:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.ABOUT"},data:i}))+'</a>\n							</li>\n							<li class="menuitem"\n								role="menuitem"\n								aria-label="'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.PHOTOSTREAM"},data:i}))+'">\n								<a data-track="gnYouPhotostreamClick" href="'+u(o((s=t!=null?t.viewer:t)!=null?s.url:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.PHOTOSTREAM"},data:i}))+'</a>\n							</li>\n							<li class="menuitem"\n								role="menuitem"\n								aria-label="'+((s=n["if"].call(a,(s=t!=null?t.elements:t)!=null?s.set_not_album:s,{name:"if",hash:{},fn:e.program(13,i,0),inverse:e.program(15,i,0),data:i}))!=null?s:"")+'">\n								<a data-track="gnYouSetsClick" href="'+u(o((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.albums:s,t))+'">'+((s=n["if"].call(a,(s=t!=null?t.elements:t)!=null?s.set_not_album:s,{name:"if",hash:{},fn:e.program(13,i,0),inverse:e.program(15,i,0),data:i}))!=null?s:"")+'</a>\n							</li>\n							<li class="menuitem"\n								role="menuitem"\n								aria-label="'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.FAVES_SHORT"},data:i}))+'">\n								<a data-track="gnYouFavoritesClick" href="'+u(o((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.favorites:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.FAVES_SHORT"},data:i}))+'</a>\n							</li>\n							<li class="menuitem"\n								role="menuitem"\n								aria-label="'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.GALLERIES"},data:i}))+'">\n								<a data-track="gnYouGalleriesClick" href="'+u(o((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.galleries:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.GALLERIES"},data:i}))+'</a>\n							</li>\n							<li class="menuitem"\n								role="menuitem"\n								aria-label="'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"global-nav.GROUPS"},data:i}))+'">\n								<a data-track="gnYouGroupsClick" href="/groups">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"global-nav.GROUPS"},data:i}))+"</a>\n							</li>\n"+((s=n["if"].call(a,(s=t!=null?t.elements:t)!=null?s.stats:s,{name:"if",hash:{},fn:e.program(17,i,0),inverse:e.noop,data:i}))!=null?s:"")+'							<li class="menuitem"\n								role="menuitem"\n								aria-label="'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"global-nav.CAMERAROLL"},data:i}))+'">\n								<a data-track="gnYouCameraRollClick" href="'+u(o((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.cameraroll:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"global-nav.CAMERAROLL"},data:i}))+'</a>\n							</li>\n							<li class="divider"\n								tabindex="-1">\n								&nbsp;\n							</li>\n							<li class="menuitem"\n								role="menuitem"\n								aria-label="'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"global-nav.RECENT_ACTIVITY"},data:i}))+'">\n								<a data-track="gnYouRecentActivityClick" href="/activity">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"global-nav.RECENT_ACTIVITY"},data:i}))+'</a>\n							</li>\n							<li class="menuitem"\n								role="menuitem"\n								aria-label="'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.PEOPLE"},data:i}))+'">\n								<a data-track="gnYouPeopleClick" href="'+u(o((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.people:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.PEOPLE"},data:i}))+'</a>\n							</li>\n							<li class="menuitem"\n								role="menuitem"\n								aria-label="'+
u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"global-nav.ORGANIZE"},data:i}))+'">\n								<a data-track="gnYouOrganizeClick" href="/photos/organize">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"global-nav.ORGANIZE"},data:i}))+"</a>\n							</li>\n						</ul>\n					</li>\n"},13:function(e,t,n,r,i){return e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.SETS"},data:i}))},15:function(e,t,n,r,i){return e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"common.ALBUMS"},data:i}))},17:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'								<li class="menuitem"\n									role="menuitem"\n									aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.STATS"},data:i}))+'">\n									<a data-track="gnYouStatsClick" href="'+a(e.lambda((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.stats:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.STATS"},data:i}))+"</a>\n								</li>\n"},19:function(e,t,n,r,i){var s,o=e.escapeExpression,u=t!=null?t:{},a=n.helperMissing;return'					<li class="toplink">\n						<a role="menuitem"\n							data-track="gnYouMainClick"\n							class="gn-link"\n							href="'+o(e.lambda((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.cameraroll:s,t))+'"\n							aria-label="'+o((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"global-nav.CAMERAROLL"},data:i}))+'"><span>'+o((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"global-nav.CAMERAROLL"},data:i}))+"</span></a>\n					</li>\n"},21:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'					<li data-context="explore">\n						<a role="menuitem"\n							data-track="gnExploreMainClick"\n							class="gn-title explore"\n							href="/explore"\n							aria-haspopup="true"\n							aria-expanded="false"\n							aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.EXPLORE"},data:i}))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.EXPLORE"},data:i}))+'</a>\n						<ul class="gn-submenu" role="menu" aria-label="submenu">\n							<li role="menuitem"\n								aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.RECENT_PHOTOS"},data:i}))+'">\n								<a data-track="gnExploreRecentPhotosClick" href="/explore">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.RECENT_PHOTOS"},data:i}))+'</a></li>\n							<li role="menuitem"\n								aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.TRENDING"},data:i}))+'">\n								<a data-track="gnExploreTagsClick" href="/photos/tags">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.TRENDING"},data:i}))+"</a></li>\n"+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.vr_link:s,{name:"if",hash:{},fn:e.program(22,i,0),inverse:e.noop,data:i}))!=null?s:"")+'							<li role="menuitem"\n								aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.THE_COMMONS"},data:i}))+'">\n								<a data-track="gnExploreTheCommonsClick" href="/commons">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.THE_COMMONS"},data:i}))+'</a>\n							</li>\n							<li role="menuitem"\n								aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.GALLERIES"},data:i}))+'">\n								<a data-track="gnExploreGalleriesClick" href="/galleries">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.GALLERIES"},data:i}))+'</a>\n							</li>\n							<li role="menuitem"\n								aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.WORLD_MAP"},data:i}))+'">\n								<a data-track="gnExploreWorldMapClick" href="/map">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.WORLD_MAP"},data:i}))+'</a>\n							</li>\n							<li role="menuitem"\n								aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CAMERA_FINDER"},data:i}))+'">\n								<a data-track="gnExploreCameraFinderClick" href="/cameras">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CAMERA_FINDER"},data:i}))+"</a>\n							</li>\n"+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.weekly_flickr:s,{name:"if",hash:{},fn:e.program(24,i,0),inverse:e.noop,data:i}))!=null?s:"")+'							<li role="menuitem"\n								aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.FLICKR_BLOG"},data:i}))+'">\n								<a data-track="gnExploreFlickrBlogClick" href="https://blog.flickr.net/">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.FLICKR_BLOG"},data:i}))+"</a>\n							</li>\n						</ul>\n					</li>\n"},22:function(e,t,n,r,i){return'								<li role="menuitem"\n									aria-label="Flickr VR">\n									<a data-track="gnExploreVRLandingClick" href="/vr">Flickr VR</a></li>\n'},24:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'								<li role="menuitem"\n									aria-label="'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.THE_WEEKLY_FLICKR"},data:i}))+'">\n									<a data-track="gnExploreWeeklyFlickrClick" href="/photos/flickr/albums/72157639868074114/">'+u((n.intlMessage||t&&t.intlMessage||o).call(
s,{name:"intlMessage",hash:{intlName:"global-nav.THE_WEEKLY_FLICKR"},data:i}))+"</a>\n								</li>\n"},26:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'					<li class="gn-create">\n						<a role="menuitem"\n							data-track="gnCreateMainClick"\n							class="gn-title"\n							href="/create"\n							aria-label="'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.CREATE"},data:i}))+'">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.CREATE"},data:i}))+"</a>\n					</li>\n"},28:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression,f=e.lambda;return'					<li class="gn-create">\n						<a role="menuitem"\n							data-track="gnCreateMainClick"\n							class="gn-title"\n							href="/create"\n							aria-haspopup="true"\n							aria-expanded="false"\n							aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CREATE"},data:i}))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CREATE"},data:i}))+'</a>\n\n						<ul class="gn-submenu" role="menu" aria-label="submenu">\n							<li role="menuitem"\n								aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CREATE_NEW"},data:i}))+'">\n								<a data-track="gnCreateNew" href="/create">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CREATE_NEW"},data:i}))+'</a></li>\n							<li role="menuitem"\n								aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CREATE_MY_WALLART"},data:i}))+'">\n								<a data-track="gnCreateWallArt" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.mywallart:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CREATE_MY_WALLART"},data:i}))+'</a></li>\n							<li role="menuitem"\n								aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CREATE_MY_PHOTOS_BOOKS"},data:i}))+'">\n								<a data-track="gnCreatePhotoBooks" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.myphotobooks:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CREATE_MY_PHOTOS_BOOKS"},data:i}))+'</a></li>\n							<li role="menuitem"\n								aria-label="'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CREATE_ORDER_HISTORY"},data:i}))+'">\n								<a data-track="gnCreateOrderHistory" href="'+a(f((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.wallet:s,t))+'">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.CREATE_ORDER_HISTORY"},data:i}))+"</a></li>\n						</ul>\n					</li>\n\n"},30:function(e,t,n,r,i){return'					<li class="gn-search-box"\n						role="menuitem">\n						<svg class="icon icon-search mobile-search-button mobile-only"><use xlink:href="#icon-search"></use></svg>\n						'+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["search-autosuggest-field-view"]:t,{name:"outlet",hash:{},data:i}))+'\n						<svg class="icon mobile-search-close-button mobile-only"><use xlink:href="#icon-close"></use></svg>\n					</li>\n'},32:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'					<li class="gn-upload desktop-only"\n						role="menuitem">\n						<a data-track="gnUploadIconMain"\n							class="gn-title"\n							href="/upload"\n							aria-label="'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.UPLOAD"},data:i}))+'">\n							<i class="upload-icon" title="'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.UPLOAD"},data:i}))+'" aria-hidden="true">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.UPLOAD"},data:i}))+"</i>\n						</a>\n					</li>\n"},34:function(e,t,n,r,i){return'					<li role="menuitem">\n						'+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["notifications-menu-view"]:t,{name:"outlet",hash:{},data:i}))+"\n					</li>\n"},36:function(e,t,n,r,i){return'					<li role="menuitem">\n						'+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["account-menu-view"]:t,{name:"outlet",hash:{},data:i}))+"\n					</li>\n"},38:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'					<li class="gn-signin"\n						role="menuitem"\n						aria-label="'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.SIGN_IN"},data:i}))+'">\n						<a data-track="gnSignin"\n							class="gn-title"\n							href="/signin">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"global-nav.LOG_IN"},data:i}))+"</a>\n					</li>\n"},40:function(e,t,n,r,i){var s;return(s=n["if"].call(t!=null?t:{},(s=t!=null?t.elements:t)!=null?s.right_side_signup:s,{name:"if",hash:{},fn:e.program(41,i,0),inverse:e.noop,data:i}))!=null?s:""},41:function(e,t,n,r,i){var s=t!=null?t:{},o=n.helperMissing,u=e.escapeExpression;return'					<li class="gn-signup"\n						role="menuitem"\n						aria-label="'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"common.SIGN_UP"},data:i}))+'">\n						<a data-track="gnSignupClick"\n							class="gn-title butt"\n							href="/signup">'+u((n.intlMessage||t&&t.intlMessage||o).call(s,{name:"intlMessage",hash:{intlName:"common.SIGN_UP"},data:i}))+"</a>\n					</li>\n"},43:function(e,t,n,r,i){var s,o=e.lambda,u=e.escapeExpression,a=t!=null?t:{},f=n.helperMissing;return'					<div class="mobile-nav-column">\n						<div class="mobile-nav-menu-item"><a data-track="gnYouAboutClick" href="'+u(o((s=
(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.profile:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.ABOUT"},data:i}))+'</a></div>\n						<div class="mobile-nav-menu-item"><a data-track="gnYouPhotostreamClick" href="'+u(o((s=t!=null?t.viewer:t)!=null?s.url:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.PHOTOSTREAM"},data:i}))+'</a></div>\n						<div class="mobile-nav-menu-item"><a data-track="gnYouSetsClick" href="'+u(o((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.albums:s,t))+'">'+((s=n["if"].call(a,(s=t!=null?t.elements:t)!=null?s.set_not_album:s,{name:"if",hash:{},fn:e.program(13,i,0),inverse:e.program(15,i,0),data:i}))!=null?s:"")+'</a></div>\n						<div class="mobile-nav-menu-item"><a data-track="gnYouFavoritesClick" href="'+u(o((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.favorites:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.FAVORITES"},data:i}))+'</a></div>\n						<div class="mobile-nav-menu-item"><a data-track="gnYouGalleriesClick" href="'+u(o((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.galleries:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"common.GALLERIES"},data:i}))+'</a></div>\n						<div class="mobile-nav-menu-item"><a data-track="gnYouGroupsClick" href="/groups">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"global-nav.GROUPS"},data:i}))+"</a></div>\n						"+((s=n["if"].call(a,(s=t!=null?t.elements:t)!=null?s.stats:s,{name:"if",hash:{},fn:e.program(44,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n						<div class="mobile-nav-menu-item"><a data-track="gnYouCameraRollClick" href="'+u(o((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.cameraroll:s,t))+'">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"global-nav.CAMERAROLL"},data:i}))+'</a></div>\n						<div class="mobile-nav-menu-item"><a data-track="gnYouRecentActivityClick" href="/activity">'+u((n.intlMessage||t&&t.intlMessage||f).call(a,{name:"intlMessage",hash:{intlName:"global-nav.RECENT_ACTIVITY"},data:i}))+"</a></div>\n					</div>\n"},44:function(e,t,n,r,i){var s,o=e.escapeExpression;return'<div class="mobile-nav-menu-item"><a data-track="gnYouStatsClick" href="'+o(e.lambda((s=(s=t!=null?t.viewer:t)!=null?s.urls:s)!=null?s.stats:s,t))+'">'+o((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"global-nav.STATS"},data:i}))+"</a></div>"},46:function(e,t,n,r,i){var s,o=t!=null?t:{},u=n.helperMissing,a=e.escapeExpression;return'					<div class="mobile-nav-column">\n						<div class="mobile-nav-menu-item"><a data-track="gnExploreMainClick" class="explore" href="/explore" aria-haspopup="true">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.EXPLORE"},data:i}))+'</a></div>\n						<div class="mobile-nav-menu-item"><a data-track="gnExploreRecentPhotosClick" href="/explore">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.RECENT_PHOTOS"},data:i}))+'</a></div>\n						<div class="mobile-nav-menu-item"><a data-track="gnExploreTagsClick" href="/photos/tags">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"common.TRENDING"},data:i}))+'</a></div>\n						<div class="mobile-nav-menu-item"><a data-track="gnExploreTheCommonsClick" href="/commons">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.THE_COMMONS"},data:i}))+'</a></div>\n						<div class="mobile-nav-menu-item"><a data-track="gnExploreGalleriesClick" href="/galleries">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.GALLERIES"},data:i}))+"</a></div>\n						"+((s=n["if"].call(o,(s=t!=null?t.elements:t)!=null?s.weekly_flickr:s,{name:"if",hash:{},fn:e.program(47,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n						<div class="mobile-nav-menu-item"><a data-track="gnExploreFlickrBlogClick" href="https://blog.flickr.net/">'+a((n.intlMessage||t&&t.intlMessage||u).call(o,{name:"intlMessage",hash:{intlName:"global-nav.FLICKR_BLOG"},data:i}))+"</a></div>\n					</div>\n"},47:function(e,t,n,r,i){return'<div class="mobile-nav-menu-item"><a data-track="gnExploreWeeklyFlickrClick" href="/photos/flickr/albums/72157639868074114/">'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(t!=null?t:{},{name:"intlMessage",hash:{intlName:"global-nav.THE_WEEKLY_FLICKR"},data:i}))+"</a></div>"},49:function(e,t,n,r,i){return"		"+e.escapeExpression((n.outlet||t&&t.outlet||n.helperMissing).call(t!=null?t:{},t!=null?t["browser-upgrade-banner-view"]:t,{name:"outlet",hash:{},data:i}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f=e.escapeExpression;return f((n.outlet||t&&t.outlet||a).call(u,t!=null?t["mobile-app-upsell-view"]:t,{name:"outlet",hash:{},data:i}))+'\n\n<div class="global-nav '+f((o=(o=n.theme||(t!=null?t.theme:t))!=null?o:a,typeof o=="function"?o.call(u,{name:"theme",hash:{},data:i}):o))+" "+((s=n["if"].call(u,t!=null?t.isSignedIn:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))!=null?s:"")+'">\n	<div class="global-nav-shim'+((s=n["if"].call(u,t!=null?t.showPartnerAccountBanner:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+'"></div>\n\n'+((s=n["if"].call(u,t!=null?t.showPartnerAccountBanner:t,{name:"if",hash:{},fn:e.program(7,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n	<div class="global-nav-content styleguide-global-nav fluid sohp-mobile-navable'+((s=n["if"].call(u,t!=null?t.showPartnerAccountBanner:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))!=null?s:"")+'">\n		<div class="global-nav-container fluid-centered" role="navigation" aria-label="'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name
:"intlMessage",hash:{intlName:"common.MAIN"},data:i}))+'">\n			<div class="mobile-nav-toggle mobile-only"><span></span></div>\n\n			<div class="flickr-logo-container">\n				<a href="/"\n					class="main-logo"\n					data-track="gnLogoClick"\n					title="'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"global-nav.FLICKR_LOGO_ALT"},data:i}))+'"\n					role="heading"\n					aria-level="1"\n					aria-label="'+f((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"global-nav.FLICKR_LOGO_ALT"},data:i}))+'">\n					<svg class="icon icon-flickr_logo"><use xlink:href="#icon-flickr_logo"></use></svg>\n				</a>\n			</div>\n\n			<ul class="nav-menu desktop-only" role="menubar">\n'+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.signup_link:s,{name:"if",hash:{},fn:e.program(9,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.you_menu:s,{name:"if",hash:{},fn:e.program(12,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.you_link:s,{name:"if",hash:{},fn:e.program(19,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.explore_menu:s,{name:"if",hash:{},fn:e.program(21,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.create_link:s,{name:"if",hash:{},fn:e.program(26,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.create_menu:s,{name:"if",hash:{},fn:e.program(28,i,0),inverse:e.noop,data:i}))!=null?s:"")+'			</ul>\n\n			<ul class="gn-tools"\n				role="menubar">\n'+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.search_bar:s,{name:"if",hash:{},fn:e.program(30,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.upload_icon:s,{name:"if",hash:{},fn:e.program(32,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,t!=null?t.showNotificationsMenu:t,{name:"if",hash:{},fn:e.program(34,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.account_menu:s,{name:"if",hash:{},fn:e.program(36,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.signin_link:s,{name:"if",hash:{},fn:e.program(38,i,0),inverse:e.noop,data:i}))!=null?s:"")+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.signup_link:s,{name:"if",hash:{},fn:e.program(40,i,0),inverse:e.noop,data:i}))!=null?s:"")+'			</ul>\n\n			<div class="mobile-nav mobile-only">\n'+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.you_menu:s,{name:"if",hash:{},fn:e.program(43,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n"+((s=n["if"].call(u,(s=t!=null?t.elements:t)!=null?s.explore_menu:s,{name:"if",hash:{},fn:e.program(46,i,0),inverse:e.noop,data:i}))!=null?s:"")+"			</div>\n		</div>\n	</div>\n\n"+((s=n["if"].call(u,t!=null?t["show-browser-upgrade-banner"]:t,{name:"if",hash:{},fn:e.program(49,i,0),inverse:e.noop,data:i}))!=null?s:"")+"\n	"+f((n.outlet||t&&t.outlet||a).call(u,t!=null?t["person-menu-view"]:t,{name:"outlet",hash:{},data:i}))+"\n	"+f((n.outlet||t&&t.outlet||a).call(u,t!=null?t["group-menu-view"]:t,{name:"outlet",hash:{},data:i}))+"\n	"+f((n.outlet||t&&t.outlet||a).call(u,t!=null?t["signup-rail-view"]:t,{name:"outlet",hash:{},data:i}))+"\n\n</div>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/global-nav",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
